#!/bin/bash

echo "ü§ñ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)..."

ssh root@194.87.236.174 << 'EOF'
    echo "üìÅ –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞..."
    cd /root/clever-driver-bot
    
    echo "üì• –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥..."
    git pull origin main
    
    echo "üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –±–æ—Ç–∞..."
    pkill -f "python.*run_bot" || echo "–ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω"
    
    echo "‚è≥ –ñ–¥–µ–º –æ—Å—Ç–∞–Ω–æ–≤–∫–∏..."
    sleep 3
    
    echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ —Å –ø–æ–ª–Ω—ã–º –ø—É—Ç–µ–º –∫ Python..."
    nohup /root/clever-driver-bot/venv/bin/python run_bot.py > bot.log 2>&1 &
    
    echo "‚è≥ –ñ–¥–µ–º –∑–∞–ø—É—Å–∫–∞..."
    sleep 5
    
    echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã..."
    ps aux | grep python | grep -v grep
    
    echo "üìã –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ –±–æ—Ç–∞..."
    if [ -f bot.log ]; then
        echo "=== –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞ ==="
        tail -10 bot.log
    fi
    
    echo "‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!"
EOF

echo "üéâ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!" 