<!DOCTYPE html>
<html>
<head>
    <title>Тест времени и статуса</title>
</head>
<body>
    <h1>Тест JavaScript</h1>
    <p>Время: <span id="testTime">--:--:--</span></p>
    <p>Статус: <span id="testStatus">Загрузка...</span></p>
    
    <script>
    function updateTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('ru-RU', { 
            timeZone: 'Europe/Moscow',
            hour12: false 
        });
        document.getElementById('testTime').textContent = timeString;
    }
    
    function checkAPI() {
        fetch('/api/current_location')
            .then(response => response.json())
            .then(data => {
                document.getElementById('testStatus').textContent = data.success ? 'API работает' : 'API не возвращает данные';
            })
            .catch(error => {
                document.getElementById('testStatus').textContent = 'Ошибка API: ' + error.message;
            });
    }
    
    // Запускаем сразу
    updateTime();
    checkAPI();
    setInterval(updateTime, 1000);
    </script>
</body>
</html> 