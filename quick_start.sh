#!/bin/bash

echo "‚ö° –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ Flask –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pkill -f "python.*app.py" 2>/dev/null
sleep 2

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd ~/clever-driver-bot/web

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è venv
source ../venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞..."
python -c "from app import app; print('‚úÖ –ò–º–ø–æ—Ä—Ç OK')" || {
    echo "‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞!"
    exit 1
}

# –ó–∞–ø—É—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ (–±–µ–∑ nohup –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
echo "üöÄ –ó–∞–ø—É—Å–∫ Flask –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ..."
echo "üí° –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ - —É–≤–∏–¥–∏—Ç–µ –∏—Ö –≤ –∫–æ–Ω—Å–æ–ª–∏"
echo "üí° –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏: Ctrl+C"
echo "üåê –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ: https://cleverdriver.ru/"
echo ""

python app.py 